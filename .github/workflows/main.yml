name: Trigger GitLab Pipeline

on:
  push:
    branches:
      - main
      - '*'

jobs:
  trigger-gitlab-pipeline:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Trigger GitLab Pipeline
      run: |
        curl --request POST \
          --url "https://gitlab.com/api/v4/projects/48639908/trigger/pipeline" \
          --header "PRIVATE-TOKEN: ${GITLAB_CI_TOKEN}" \
          --form "ref=${GITHUB_REF#refs/heads/}" \
          --form "token=${GITLAB_CI_TRIGGER_TOKEN}"
